{{ define "main" }}
<div class="td-content">
    <div class="lead">
        <h1>{{ .Title }}</h1>
        {{ if .Params.subtitle }}
        <p class="subtitle">{{ .Params.subtitle }}</p>
        {{ end }}
        {{ if .Content }}
        <div class="content">
            {{ .Content }}
        </div>
        {{ end }}
    </div>
    
    <div class="td-page-meta">
        <p>{{ len .Pages }} {{ printf "posts with %s" (.Data.Singular | title) }}</p>
    </div>
    
    <div class="section-index">
        {{ range .Pages }}
        <div class="entry mb-4">
            <h3><a href="{{ .RelPermalink }}">{{ .Title }}</a></h3>
            <div class="meta mb-2">
                <time datetime="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}" class="text-muted">
                    <i class="fas fa-calendar-alt"></i> {{ .Date.Format (.Site.Params.time_format_default | default "2006-01-02 15:04") }}
                </time>
                {{ if .Params.author }}
                <span class="text-muted"> • <i class="fas fa-user"></i> {{ .Params.author }}</span>
                {{ end }}
                {{ if .Params.tags }}
                <span class="text-muted"> • <i class="fas fa-tags"></i> </span>
                {{ range $i, $tag := .Params.tags }}
                    {{ if $i }}, {{ end }}
                    <a href="{{ "/tags/" | relLangURL }}{{ $tag | urlize }}/" class="badge badge-secondary">{{ $tag }}</a>
                {{ end }}
                {{ end }}
            </div>
            {{ if .Summary }}
            <div class="summary text-muted">
                {{ .Summary | truncate 200 }}
                {{ if .Truncated }}
                <a href="{{ .RelPermalink }}" class="text-primary">{{ i18n "read_more" | default "Read more" }}...</a>
                {{ end }}
            </div>
            {{ end }}
        </div>
        {{ end }}
    </div>
</div>
{{ end }} 